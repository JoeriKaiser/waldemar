/* ==========================================================================
   WARM CRAFT - Tailwind Layers & Utilities
   ========================================================================== */

@import 'tailwindcss/theme';
@plugin "@tailwindcss/typography";

/* -------------------------------------------------------------------------
   BASE LAYER
   ------------------------------------------------------------------------- */

@layer base {
  html {
    color-scheme: light;
    scroll-behavior: smooth;
  }

  body {
    @apply min-h-[95vh] m-0 flex flex-col overflow-y-scroll;
    background: var(--color-bg);
    color: var(--color-text);
    font-family: var(--font-body);
    font-size: var(--text-body);
    line-height: var(--leading-body);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  /* Paper texture overlay */
  body::after {
    content: '';
    position: fixed;
    inset: 0;
    background-image: var(--texture-paper);
    opacity: var(--texture-opacity);
    pointer-events: none;
    z-index: 9999;
    mix-blend-mode: multiply;
  }

  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    font-family: var(--font-display);
    font-weight: 500;
    line-height: var(--leading-heading);
    color: var(--wc-ink);
  }

  h1 {
    font-size: var(--text-h1);
  }
  h2 {
    font-size: var(--text-h2);
  }
  h3 {
    font-size: var(--text-h3);
  }

  a {
    color: var(--wc-accent);
    text-decoration-color: var(--wc-accent-muted);
    text-underline-offset: 3px;
    transition:
      color var(--duration-fast) var(--ease-smooth),
      text-decoration-color var(--duration-fast) var(--ease-smooth);
  }
  a:hover {
    color: var(--wc-accent-deep);
    text-decoration-color: var(--wc-accent);
  }

  ::selection {
    background: var(--wc-accent-muted);
    color: var(--wc-ink);
  }

  :focus-visible {
    outline: 2px solid var(--wc-accent);
    outline-offset: 3px;
    border-radius: var(--radius-sm);
  }
}

/* -------------------------------------------------------------------------
   THEME LAYER - Expose tokens to Tailwind
   ------------------------------------------------------------------------- */

@theme {
  --color-secondary: var(--color-secondary);
  --color-accent: var(--wc-accent);
  --color-accent-soft: var(--wc-accent-soft);
  --color-accent-deep: var(--wc-accent-deep);
  --color-olive: var(--wc-olive);
  --color-parchment: var(--wc-parchment);
  --color-cream: var(--wc-cream);
  --color-sand: var(--wc-sand);
  --color-ink: var(--wc-ink);
  --color-bark: var(--wc-bark);

  --radius-sm: var(--radius-sm);
  --radius-md: var(--radius-md);
  --radius-lg: var(--radius-lg);
  --radius-xl: var(--radius-xl);
}

/* -------------------------------------------------------------------------
   UTILITIES LAYER
   ------------------------------------------------------------------------- */

@layer utilities {
  /* Container utilities */
  .container-center {
    box-sizing: content-box;
    margin-inline: auto;
    width: calc(100% - (var(--space-xl) * 2));
    max-inline-size: 800px;
  }

  .container-wide {
    box-sizing: content-box;
    margin-inline: auto;
    width: calc(100% - (var(--space-xl) * 2));
    max-inline-size: 1100px;
  }

  .container-narrow {
    box-sizing: content-box;
    margin-inline: auto;
    width: calc(100% - (var(--space-l) * 2));
    max-inline-size: 640px;
  }

  /* -------------------------------------------------------------------------
     CARD STYLES - Notebook / Index Card Aesthetic
     ------------------------------------------------------------------------- */

  .card {
    background: var(--wc-cream);
    border: 1px solid var(--wc-sand);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-sm);
    position: relative;
  }

  .card-paper {
    background: linear-gradient(
      180deg,
      var(--wc-cream) 0%,
      var(--wc-parchment) 100%
    );
    border: 1px solid var(--wc-sand);
    border-radius: var(--radius-lg);
    box-shadow:
      var(--shadow-md),
      inset 0 1px 0 rgba(255, 255, 255, 0.5);
    position: relative;
  }

  /* Slightly rotated cards for that handmade feel */
  .card-tilted {
    transform: rotate(-1deg);
    transition: transform var(--duration-normal) var(--ease-bounce);
  }
  .card-tilted:hover {
    transform: rotate(0deg) translateY(-4px);
  }

  .card-hover {
    transition:
      transform var(--duration-normal) var(--ease-bounce),
      box-shadow var(--duration-normal) var(--ease-smooth);
  }
  .card-hover:hover {
    transform: translateY(-6px);
    box-shadow: var(--shadow-lift);
  }

  /* -------------------------------------------------------------------------
     BUTTON STYLES
     ------------------------------------------------------------------------- */

  .btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    padding: 0.75rem 1.25rem;
    border-radius: var(--radius-md);
    text-decoration: none;
    border: 2px solid transparent;
    font-family: var(--font-body);
    font-weight: 600;
    font-size: var(--text-small);
    cursor: pointer;
    user-select: none;
    transition:
      transform var(--duration-fast) var(--ease-bounce),
      background var(--duration-normal) var(--ease-smooth),
      border-color var(--duration-normal) var(--ease-smooth),
      box-shadow var(--duration-normal) var(--ease-smooth);
  }

  .btn:active {
    transform: scale(0.97);
  }

  .btn-primary {
    background: var(--wc-accent);
    color: var(--wc-parchment);
    border-color: var(--wc-accent-deep);
    box-shadow: var(--shadow-sm);
  }
  .btn-primary:hover {
    background: var(--wc-accent-deep);
    box-shadow: var(--shadow-accent);
    transform: translateY(-2px);
  }

  .btn-secondary {
    background: var(--wc-olive);
    color: var(--wc-parchment);
    border-color: var(--wc-olive-deep);
    box-shadow: var(--shadow-sm);
  }
  .btn-secondary:hover {
    background: var(--wc-olive-deep);
    transform: translateY(-2px);
  }

  .btn-ghost {
    background: transparent;
    color: var(--wc-bark);
    border-color: var(--wc-sand);
  }
  .btn-ghost:hover {
    background: var(--wc-cream);
    border-color: var(--wc-clay);
  }

  .btn-outline {
    background: transparent;
    color: var(--wc-accent);
    border-color: var(--wc-accent);
  }
  .btn-outline:hover {
    background: var(--wc-accent);
    color: var(--wc-parchment);
  }

  /* -------------------------------------------------------------------------
     DECORATIVE ELEMENTS - Stamps, Washi Tape, etc.
     ------------------------------------------------------------------------- */

  .stamp {
    display: inline-flex;
    align-items: center;
    gap: 0.35rem;
    padding: 0.35rem 0.65rem;
    font-family: var(--font-display);
    font-size: var(--text-xs);
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: var(--tracking-wide);
    color: var(--wc-accent-deep);
    border: 2px solid var(--wc-accent);
    border-radius: var(--radius-sm);
    transform: rotate(-2deg);
    opacity: 0.9;
  }

  .stamp-olive {
    color: var(--wc-olive-deep);
    border-color: var(--wc-olive);
  }

  .washi-tape {
    position: absolute;
    width: 60px;
    height: 20px;
    background: var(--wc-accent-muted);
    opacity: 0.7;
    transform: rotate(-12deg);
  }

  .washi-tape-olive {
    background: var(--wc-olive-soft);
  }

  /* -------------------------------------------------------------------------
     LINK STYLES
     ------------------------------------------------------------------------- */

  .link-underline {
    text-decoration: underline;
    text-decoration-style: wavy;
    text-decoration-color: var(--wc-accent-muted);
    text-underline-offset: 4px;
    color: var(--wc-bark);
    transition:
      color var(--duration-fast) var(--ease-smooth),
      text-decoration-color var(--duration-fast) var(--ease-smooth);
  }
  .link-underline:hover {
    color: var(--wc-accent);
    text-decoration-color: var(--wc-accent);
  }

  .link-subtle {
    text-decoration: none;
    color: var(--wc-bark);
    transition: color var(--duration-fast) var(--ease-smooth);
  }
  .link-subtle:hover {
    color: var(--wc-accent);
  }

  /* -------------------------------------------------------------------------
     GLASS / FROSTED EFFECT (warm-tinted)
     ------------------------------------------------------------------------- */

  .glass {
    backdrop-filter: saturate(120%) blur(12px);
    background: color-mix(in oklab, var(--wc-parchment) 85%, transparent);
    border: 1px solid color-mix(in oklab, var(--wc-sand) 60%, transparent);
  }

  /* -------------------------------------------------------------------------
     FORM ELEMENTS
     ------------------------------------------------------------------------- */

  .kbd {
    display: inline-flex;
    align-items: center;
    border-radius: var(--radius-sm);
    padding: 0.15rem 0.4rem;
    height: 1.5rem;
    font-size: var(--text-xs);
    font-family: var(--font-body);
    line-height: 1;
    border: 1px solid var(--wc-sand);
    background: var(--wc-cream);
    color: var(--wc-bark);
    box-shadow: 0 1px 0 var(--wc-clay);
  }

  /* -------------------------------------------------------------------------
     ACCESSIBILITY
     ------------------------------------------------------------------------- */

  .sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border-width: 0;
  }

  /* -------------------------------------------------------------------------
     TYPOGRAPHY UTILITIES
     ------------------------------------------------------------------------- */

  .font-display {
    font-family: var(--font-display);
  }

  .font-body {
    font-family: var(--font-body);
  }

  .text-balance {
    text-wrap: balance;
  }

  /* Handwritten-style number */
  .number-handwritten {
    font-family: var(--font-display);
    font-weight: 600;
    font-size: 1.5em;
    color: var(--wc-accent);
    line-height: 1;
  }

  /* -------------------------------------------------------------------------
     ANIMATION UTILITIES
     ------------------------------------------------------------------------- */

  .animate-wiggle {
    animation: wiggle 3s ease-in-out infinite;
  }

  .animate-float {
    animation: float 4s ease-in-out infinite;
  }
}

/* -------------------------------------------------------------------------
   KEYFRAME ANIMATIONS
   ------------------------------------------------------------------------- */

@keyframes wiggle {
  0%,
  100% {
    transform: rotate(-1deg);
  }
  50% {
    transform: rotate(1deg);
  }
}

@keyframes float {
  0%,
  100% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(-8px);
  }
}

@keyframes grow-in {
  from {
    opacity: 0;
    transform: scale(0.95) translateY(10px);
  }
  to {
    opacity: 1;
    transform: scale(1) translateY(0);
  }
}

@keyframes stamp-in {
  0% {
    transform: scale(1.3) rotate(-5deg);
    opacity: 0;
  }
  50% {
    transform: scale(0.95) rotate(2deg);
    opacity: 1;
  }
  100% {
    transform: scale(1) rotate(-2deg);
    opacity: 1;
  }
}

@keyframes slide-up {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* -------------------------------------------------------------------------
   COMPONENTS LAYER
   ------------------------------------------------------------------------- */

@layer components {
  .prose-article {
    @apply prose max-w-none;
    --tw-prose-body: var(--wc-ink);
    --tw-prose-headings: var(--wc-ink);
    --tw-prose-links: var(--wc-accent);
    --tw-prose-bold: var(--wc-espresso);
    --tw-prose-counters: var(--wc-bark);
    --tw-prose-bullets: var(--wc-accent);
    --tw-prose-hr: var(--wc-sand);
    --tw-prose-quotes: var(--wc-bark);
    --tw-prose-quote-borders: var(--wc-accent);
    --tw-prose-captions: var(--wc-bark);
    --tw-prose-code: var(--wc-espresso);
    --tw-prose-pre-code: var(--wc-cream);
    --tw-prose-pre-bg: var(--wc-ink);
    --tw-prose-th-borders: var(--wc-sand);
    --tw-prose-td-borders: var(--wc-sand);
  }
}
